{% extends 'base.html.twig' %}

{% block title %}Document Details - DocVault{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('styles') }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('document-preview') }}
{% endblock %}

{% block body %}
<div class="container-fluid">
    {# Notification Container #}
    <div id="notification-container" class="position-fixed top-0 end-0 p-3" style="z-index: 9999;">
    </div>

    {# Hidden element to pass document ID to JavaScript #}
    <div id="document-id" data-document-id="{{ documentId }}" style="display: none;"></div>

    {# Breadcrumb #}
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ path('app_dashboard') }}">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="{{ path('app_documents') }}">Documents</a></li>
            <li class="breadcrumb-item active" aria-current="page" id="document-name-breadcrumb">Loading...</li>
        </ol>
    </nav>

    {# Document Information Container #}
    <div id="document-info">
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="text-muted mt-3">Loading document details...</p>
        </div>
    </div>
</div>

{# Preview Modal #}
<div class="modal fade" id="previewModal" tabindex="-1" aria-labelledby="previewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="previewModalLabel">
                    <i class="bi bi-eye"></i> Document Preview
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-0">
                {# Toolbar #}
                <div class="toolbar bg-light border-bottom p-2">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="zoom-out-btn" title="Zoom Out (-)">
                                <i class="bi bi-zoom-out"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="zoom-reset-btn" title="Reset Zoom (0)">
                                <span id="zoom-level">100%</span>
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="zoom-in-btn" title="Zoom In (+)">
                                <i class="bi bi-zoom-in"></i>
                            </button>
                        </div>

                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="rotate-left-btn" title="Rotate Left (←)">
                                <i class="bi bi-arrow-counterclockwise"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="rotate-right-btn" title="Rotate Right (→)">
                                <i class="bi bi-arrow-clockwise"></i>
                            </button>
                        </div>

                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="fullscreen-btn" title="Toggle Fullscreen">
                                <i class="bi bi-arrows-fullscreen"></i>
                            </button>
                        </div>
                    </div>
                </div>

                {# Preview Content #}
                <div id="preview-content" class="bg-dark text-white d-flex align-items-center justify-content-center" style="min-height: 400px;">
                    <p class="text-muted">Preview will appear here</p>
                </div>
            </div>
            <div class="modal-footer">
                <div class="text-muted small me-auto">
                    <i class="bi bi-info-circle"></i>
                    Use keyboard: <kbd>+</kbd>/<kbd>-</kbd> zoom, <kbd>←</kbd>/<kbd>→</kbd> rotate, <kbd>0</kbd> reset, <kbd>Esc</kbd> close
                </div>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
